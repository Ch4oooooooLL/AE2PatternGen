# AE2 Pattern Generator

AE2 Pattern Generator 是一个专为 Minecraft 1.7.10 (如 GregTech New Horizons 等注重复杂合成的模组环境) 开发的实用辅助模组。
其核心功能在于基于可配置的过滤系统与平衡机制，将 GregTech 机器合成配方批量导出为标准的 AE2 编码样板。

---

## ✨ 核心特性

### 1. 批量编码 (Batch Encoding)
该模组支持选中指定的 GregTech 机器配方表 (例如 `implosion_compressor` 或 `assembler`)，系统将自动检索对应所有合成配方，并将其转换为 AE2 的处理模式样板 (Processing Pattern)。该过程原生支持包含流体的配方转换。

### 2. 多维度配方过滤 (Advanced Filtering)
模组提供深度的配方过滤面板，以避免生成冗余配方：
- **矿物词典正则匹配**: 支持使用正则表达式对产物与输入材料的矿物辞典进行精确匹配。
- **自定义黑名单**: 允许通过匹配规则排除指定的输入或输出物品。
- **强制替换机制**: 支持通过配置文件设定静默替换规则，例如将所有的 `ingotCopper` 统一映射为 `dustCopper`。
- **电压等阶精确限制 (Strict Tier Matching)**: 提供电压层级控制选项。系统仅允许生成与设定电压层级 (如 `HV`, `EV`) 完全匹配的配方，严格拦截越级配方与冗余的低压配方，确保编码样板与机器电压规格的唯一对应性。

### 3. 等价消耗平衡 (Consumption & Balancing)
为贴合高难度整合包的发展节奏，模组引入了样板消耗验证机制：
- 批量生成样板时，系统将检测玩家背包内是否持有对应数量的真实 **AE2 空白样板 (Blank Pattern)**。
- 只有在验证持有足额空白样板后，系统才会执行精准扣除并完成生成动作。若玩家储备不足，生成请求将被驳回并在聊天栏输出数额提示。

### 4. 虚拟缓存仓储 (Virtual Storage System)
为避免大批量生成操作导致物品散落或客户端渲染超载，所有生成的样板首先被安全贮存于服务端的独立虚拟持久化节点中。
玩家可通过自带的 GUI 管理器核对查阅、删除或清空已生成的样板数据，随后向真实的物理容器 (如箱子、AE2 接口) 发起批量转仓操作。

### 5. 无线提取 (Wireless Extraction)
支持与 AE2 网络的无线绑定：
- **安全终端绑定**: 将生成器放入 ME 安全终端的插槽中即可完成网络绑定（同原版无线终端操作方式）。
- **远程样板提取**: 在生成过程中，系统会自动检测已绑定的网络。若网络内有足够的空白样板，将优先直接从网络中提取，实现无需背包材料的远程样板制作。

---

## 🎮 操作指南

| 交互方式 | 功能说明 |
|------|------|
| **右键**（对空气） | 打开**主配置终端** — 填写设备 ID、正则过滤规则、指定电压等并提交生成请求。 |
| **Shift + 右键**（对空气） | 打开**存储管理器** — 翻阅并管理当前存储在虚拟节点的样板数据。 |
| **Shift + 右键**（对方块） | **批量导出** — 将已通过验证的虚拟样板流出并注入至目标物理容器内。 |

此外，玩家可将光标悬停在物品上按下 `Shift` 键调出操作提示。系统同样提供用于控制台执行或 OP 自动化触发的命令节点：`/patterngen`。

---

## 🚀 部署与安装

1. 从 [Releases](https://github.com/Ch4oooooooLL/AE2PatternGen/releases) 页面获取最新的构建产物 (`.jar` 文件)。
2. 将其放置于客户端或服务端的 `mods` 路径下后启动应用。

---

## 🛠️ 构建源码

本项目基于 RetroFuturaGradle (RFG) 系统开发：

```bash
# 增量构建类文件
./gradlew classes

# 执行代码风格标准化 (修复 CI 潜在报错)
./gradlew spotlessApply

# 全量构建发布版本
./gradlew build
```
编译产物将被输出至 `build/libs` 目录下。

---

## 📜 更新日志
1.3.4
### v1.3.4
- **新增**: 交互式配方冲突选择功能 — 当多个配方产出同一产物时，现在会弹出 GUI 供玩家手动挑选。
- **新增**: 下拉框滚动支持 — 电压选择界面现在支持鼠标滚轮滚动并带有视觉指标条。
- **优化**: 完善了 AE2 现代风格界面体验与代码逻辑重构。

### v1.3.3
- **新增**: 无线提取功能支持 — 可通过 ME 安全终端绑定网络并自动从网络中提取空白样板。
- **优化**: 适配 GTNH 版 AE2 rv3 API 兼容性，优化代码结构与异常处理。

### v1.3.2 
- **修复**: 修复液滴样板为负数的错误

### v1.3.1 
- **修复**: 电压等级过滤算法边界值错误，EU 值为 33, 129, 513 等边界值时会被错误归类
- **新增**: 补全 GTNH 完整电压等级支持 (UHV, UEV, UIV, UMV, UXV)
- **优化**: 电压等级计算算法改用阈值递增方式，确保边界值正确匹配

### v1.2.1
- 新增矿辞替换规则配置文件支持
- 新增电压等级精确过滤功能
- 优化 GUI 界面显示

### v1.1.0
- 新增虚拟仓储系统
- 新增样板预览与详情查看
- 新增批量导出到容器功能

### v1.0.0
- 初始版本发布
- 支持批量编码 GT 配方为 AE2 样板
- 支持矿物词典正则过滤
- 支持黑名单过滤

---

## 📄 许可证

本项目依据 MIT License 许可协议开源发布。
