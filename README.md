# AE2 Pattern Generator

AE2 Pattern Generator 是一个专为 Minecraft 1.7.10 (如 GregTech New Horizons 等注重复杂合成的模组环境) 开发的实用辅助模组。
其核心功能在于基于可配置的过滤系统与平衡机制，将 GregTech 机器合成配方批量导出为标准的 AE2 编码样板。

---

## ✨ 核心特性

### 1. 一次性批量生成样板
可按机器 `RecipeMap`（如 `assembler`、`implosion_compressor`）批量扫描配方，并转换为 AE2 `Processing Pattern`。物品输入/输出与流体输入/输出都在同一流程内处理。

### 2. 过滤规则够细，减少无用样板
生成前可通过多层过滤减少冗余：
- **矿辞正则匹配**: 对输入/输出的矿物词典条目做正则筛选。
- **黑名单过滤**: 按规则排除指定输入或输出。
- **强制替换**: 按配置将指定材料统一映射（例如 `ingotCopper` -> `dustCopper`）。
- **严格电压匹配**: 只保留与目标电压层级（如 `HV`、`EV`）一致的配方。

### 3. 生成前先做消耗校验
生成请求会先校验 `Blank Pattern` 库存，再执行扣除。支持优先从已绑定的 ME 网络取材，不足时回退到玩家库存。数量不足会直接拒绝请求并给出提示。

### 4. 先写入虚拟仓储，再统一导出
生成结果先写入服务端虚拟仓储，不直接落地。可在 GUI 中查看、删除、清空，再批量导出到目标容器（箱子、AE2 接口等）。

### 5. 支持无线绑定和远程取材
支持与 AE2 网络无线绑定。完成绑定后，可在生成时直接使用网络内空白样板，减少手动物料搬运。

---

## 📌 主要更新内容

1. 使用 MUI 完全重构 GUI
2. 重构冲突配方选择逻辑
3. 添加蹲下右键获取机器配方 ID 功能
4. 添加优先使用 ME 网络库存的功能

---

## 📝 待办列表

1. 取消字符硬编码，添加多语言支持
2. 建立统一 Forge 配置类
3. 继续考虑更多的平衡性调整

---

## 🎮 操作指南

| 交互方式 | 功能说明 |
|------|------|
| **右键**（对空气） | 打开**主配置终端** — 填写设备 ID、正则过滤规则、指定电压等并提交生成请求。 |
| **Shift + 右键**（对空气） | 打开**存储管理器** — 翻阅并管理当前存储在虚拟节点的样板数据。 |
| **Shift + 右键**（对方块） | **方块检测 / 条件导出** — 优先检测目标方块（含 GT 主方块配方信息）；若目标为可写入容器，则将虚拟样板批量导出到该容器。 |

此外，玩家可将光标悬停在物品上按下 `Shift` 键调出操作提示。系统同样提供用于控制台执行或 OP 自动化触发的命令节点：`/patterngen`。

---

## 🚀 部署与安装

1. 从 [Releases](https://github.com/Ch4oooooooLL/AE2PatternGen/releases) 页面获取最新的构建产物 (`.jar` 文件)。
2. 将其放置于客户端或服务端的 `mods` 路径下后启动应用。

---

## 🛠️ 构建源码

本项目基于 RetroFuturaGradle (RFG) 系统开发：

```bash
# 增量构建类文件
./gradlew classes

# 执行代码风格标准化 (修复 CI 潜在报错)
./gradlew spotlessApply

# 全量构建发布版本
./gradlew build
```
编译产物将被输出至 `build/libs` 目录下。

---

## 📜 更新日志

### v1.3.6
- **重构**: 重构冲突配方选择界面，优化冲突配方的批量展示与交互流程。

### v1.3.5
- **修复**: 修复滚轮滚动导致的空指针异常 (NPE) 闪退。
- **修复**: 修复高分辨率/放大字体下标题自动换行的问题。
- **优化**: 全面引入 GTNH ModularUI (v1.3.1) 框架重构所有 GUI。
- **优化**: 按钮现在具有标准的 Minecraft 三维边框贴图。


### v1.3.4
- **新增**: 交互式配方冲突选择功能 — 当多个配方产出同一产物时，现在会弹出 GUI 供玩家手动挑选。
- **新增**: 下拉框滚动支持 — 电压选择界面现在支持鼠标滚轮滚动并带有视觉指标条。
- **优化**: 完善了 AE2 现代风格界面体验与代码逻辑重构。

### v1.3.3
- **新增**: 无线提取功能支持 — 可通过 ME 安全终端绑定网络并自动从网络中提取空白样板。
- **优化**: 适配 GTNH 版 AE2 rv3 API 兼容性，优化代码结构与异常处理。

### v1.3.2 
- **修复**: 修复液滴样板为负数的错误

### v1.3.1 
- **修复**: 电压等级过滤算法边界值错误，EU 值为 33, 129, 513 等边界值时会被错误归类
- **新增**: 补全 GTNH 完整电压等级支持 (UHV, UEV, UIV, UMV, UXV)
- **优化**: 电压等级计算算法改用阈值递增方式，确保边界值正确匹配

### v1.2.1
- 新增矿辞替换规则配置文件支持
- 新增电压等级精确过滤功能
- 优化 GUI 界面显示

### v1.1.0
- 新增虚拟仓储系统
- 新增样板预览与详情查看
- 新增批量导出到容器功能

### v1.0.0
- 初始版本发布
- 支持批量编码 GT 配方为 AE2 样板
- 支持矿物词典正则过滤
- 支持黑名单过滤

---

## 📄 许可证

本项目依据 MIT License 许可协议开源发布。
